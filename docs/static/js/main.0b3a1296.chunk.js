(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,i){e.exports=i(443)},194:function(e,t,i){},227:function(e,t){},229:function(e,t){},256:function(e,t){},301:function(e,t){},443:function(e,t,i){"use strict";i.r(t);i(189),i(191);var n=i(1),a=i.n(n),s=(i(194),i(78)),r=i(113),l=i(17),o=i(18),c=i(20),u=i(19),p=i(21),d=i(183),h=i.n(d),m=[{constant:!1,inputs:[{name:"_kittieId",type:"uint256"}],name:"buyKittie",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"getKittiesForSale",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_kittieId",type:"uint256"},{name:"_priceInWei",type:"uint256"}],name:"kittieForSale",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"kittieToOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"kitties",outputs:[{name:"id",type:"uint256"},{name:"price",type:"uint256"},{name:"forSale",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"getKittiesByOwner",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"createFirstKittie",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_kittieId",type:"uint256"}],name:"kittieCancelSale",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"uint256"},{indexed:!0,name:"owner",type:"address"}],name:"NewPseudoKittie",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"uint256"},{indexed:!0,name:"owner",type:"address"}],name:"UpdateOwnerKitties",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"}],b=i(455),y=i(456),f=i(459),w=i(460),v=i(451),S=i(452),g=i(453),k=i(457),K=i(444),E=i(445),O=i(446),C=i(447),j=i(448),F=i(449),x=i(458),D=function(e){function t(e){var i;return Object(l.a)(this,t),(i=Object(c.a)(this,Object(u.a)(t).call(this,e))).showSellButton=function(){i.setState({sellFlag:!0})},i.isSelling=function(e){i.setState({isSelling:e})},i.isCanceling=function(e){i.setState({isCanceling:e})},i.handleChange=function(e){var t=e.target,n=t.name,a=t.value;a>=0&&i.setState(Object(s.a)({},n,a))},i.close=function(){i.setState(i.initialState)},i.initialState={sellFlag:!1,isSelling:!1,isCanceling:!1,value:""},i.state=i.initialState,i}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;if(this.props.selectedKittie){var t=this.state.sellFlag?{}:{visibility:"hidden"};return a.a.createElement(k.a,{show:this.props.showDetails,onHide:this.props.handleCloseDetails,onExited:this.close},a.a.createElement(k.a.Header,{closeButton:!0},a.a.createElement(k.a.Title,null,"Kittie Info")),a.a.createElement(k.a.Body,null,a.a.createElement(K.a,{src:this.props.selectedKittie.url,responsive:!0}),a.a.createElement("div",{style:this.props.selectedKittie.forSale?{}:{height:"0"}},a.a.createElement("div",{className:"text-center",style:this.props.selectedKittie.forSale?{}:{visibility:"hidden"}},a.a.createElement("h1",null,a.a.createElement(E.a,{bsStyle:"warning"},"For Sale")),a.a.createElement("h2",null,window.web3.utils.fromWei(this.props.selectedKittie.price,"ether")," ETH"),a.a.createElement(O.a,{style:{minWidth:"100px"},bsStyle:"danger",disabled:this.state.isCanceling,onClick:function(){return e.props.kittieCancelSale(e.isCanceling)}},this.state.isCanceling?"Processing...":"Cancel")))),a.a.createElement(k.a.Footer,{style:this.props.selectedKittie.forSale?{visibility:"hidden"}:{}},a.a.createElement(C.a,{inline:!0},a.a.createElement(j.a,{style:t},a.a.createElement(F.a,null,"Price in ETH"),a.a.createElement(x.a,{style:{margin:"10px"},type:"number",name:"value",disabled:this.state.isSelling,value:this.state.value,placeholder:"0.0001",onChange:this.handleChange})),a.a.createElement(O.a,{style:{minWidth:"100px"},bsStyle:"primary",disabled:this.state.isSelling,onClick:this.state.sellFlag?function(){return e.props.sellKittie(e.state.value,e.isSelling)}:this.showSellButton},this.state.sellFlag?this.state.isSelling?"Processing...":"Confirm":"Sell"))))}return a.a.createElement("div",null)}}]),t}(n.Component),B=i(450),I=function(e){function t(e){var i;return Object(l.a)(this,t),(i=Object(c.a)(this,Object(u.a)(t).call(this,e))).onLoad=function(){i.setState({didLoad:!0})},i.state={didLoad:!1},i}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.didLoad?{}:{visibility:"hidden"},t=this.props,i=t.kittie,n=t.showKittieDetails,s=a.a.createElement("h2",{className:"text-center"},window.web3.utils.fromWei(this.props.kittie.price,"ether")," ETH"),r=a.a.createElement("div",{className:"text-center",style:i.forSale?{}:{visibility:"hidden"}},a.a.createElement("h1",null,a.a.createElement(E.a,{bsStyle:"warning"},"For Sale")));return a.a.createElement("div",{style:e},a.a.createElement(B.a,{href:"#",onLoad:this.onLoad,onClick:n,src:i.url}),this.props.inShop?s:r)}}]),t}(n.Component),M=function(e){function t(e){var i;return Object(l.a)(this,t),(i=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleCloseDetails=function(){i.setState({showDetails:!1})},i.handleShowDetails=function(e){i.setState({selectedKittieIndex:e,showDetails:!0})},i.sellKittie=function(e,t){!isNaN(e)&&e>0&&i.props.sellKittie(i.props.kitties[i.state.selectedKittieIndex].id,e,t,i.handleCloseDetails)},i.kittieCancelSale=function(e){i.props.kittieCancelSale(i.props.kitties[i.state.selectedKittieIndex].id,e)},i.state={showDetails:!1,selectedKittieIndex:void 0},i}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.kitties.map(function(t,i){return a.a.createElement(v.a,{xs:6,md:4,key:i},a.a.createElement(I,{kittie:e.props.kitties[i],showKittieDetails:function(){return e.handleShowDetails(i)}}))});return a.a.createElement("div",null,a.a.createElement(S.a,{className:"kitties-grid",fluid:!0},a.a.createElement(g.a,null,t)),a.a.createElement(D,{handleCloseDetails:this.handleCloseDetails,showDetails:this.state.showDetails,selectedKittie:this.props.kitties[this.state.selectedKittieIndex],sellKittie:this.sellKittie,kittieCancelSale:this.kittieCancelSale}))}}]),t}(n.Component),P=i(454),N=function(e){function t(e){var i;return Object(l.a)(this,t),(i=Object(c.a)(this,Object(u.a)(t).call(this,e))).isCreating=function(e){i.setState({isCreating:e})},i.state={isCreating:!1},i}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(P.a,{className:"center-block wellGenerate"},a.a.createElement("span",{className:"h2 center-block text-center"},this.state.isCreating?"Creating your first Pseudo Kittie":"Create your first Pseudo Kittie"),a.a.createElement(O.a,{className:"center-block",bsStyle:"primary",bsSize:"large",disabled:this.state.isCreating,onClick:this.state.isCreating?null:function(){return e.props.createFirstKittie(e.isCreating)}},this.state.isCreating?"Creating...":"Create"))}}]),t}(n.Component),A=function(e){function t(e){var i;return Object(l.a)(this,t),(i=Object(c.a)(this,Object(u.a)(t).call(this,e))).isBuying=function(e){i.setState({isBuying:e})},i.close=function(){i.setState(i.initialState)},i.initialState={isBuying:!1},i.state=i.initialState,i}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.props.selectedKittie?a.a.createElement(k.a,{show:this.props.showDetails,onHide:this.props.handleCloseDetails,onExited:this.close},a.a.createElement(k.a.Header,{closeButton:!0},a.a.createElement(k.a.Title,null,"Kittie Purchase")),a.a.createElement(k.a.Body,null,a.a.createElement(K.a,{src:this.props.selectedKittie.url,responsive:!0}),a.a.createElement(k.a.Footer,null,a.a.createElement("div",{className:"text-center"},a.a.createElement("h2",null,window.web3.utils.fromWei(this.props.selectedKittie.price,"ether")," ETH"),a.a.createElement(O.a,{style:{minWidth:"100px"},bsStyle:"success",disabled:this.state.isBuying,onClick:function(){return e.props.buyKittie(e.isBuying)}},this.state.isBuying?"Processing...":"Buy"))))):a.a.createElement("div",null)}}]),t}(n.Component),W=function(e){function t(e){var i;return Object(l.a)(this,t),(i=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleCloseDetails=function(){i.setState({showDetails:!1})},i.handleShowDetails=function(e){i.setState({selectedKittieIndex:e,showDetails:!0})},i.buyKittie=function(e){var t=i.props.kittiesForSale[i.state.selectedKittieIndex];i.props.buyKittie(t.id,t.price,e,i.handleCloseDetails)},i.state={showDetails:!1,selectedKittieIndex:void 0},i}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;if(this.props.kittiesForSale){var t=this.props.kittiesForSale.map(function(t,i){return a.a.createElement(v.a,{xs:6,md:4,key:i},a.a.createElement(I,{inShop:!0,kittie:e.props.kittiesForSale[i],showKittieDetails:function(){return e.handleShowDetails(i)}}))});return a.a.createElement("div",null,a.a.createElement(S.a,{className:"kitties-grid",fluid:!0},a.a.createElement(g.a,null,t)),a.a.createElement(A,{handleCloseDetails:this.handleCloseDetails,showDetails:this.state.showDetails,selectedKittie:this.props.kittiesForSale[this.state.selectedKittieIndex],buyKittie:this.buyKittie}))}return a.a.createElement("div",null)}}]),t}(n.Component),H=function(e){function t(e){var i;return Object(l.a)(this,t),(i=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isCreating:!1},i}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.kitties?0===this.props.kitties.length?a.a.createElement(N,{createFirstKittie:this.props.createFirstKittie}):a.a.createElement(y.a,{style:{minHeight:"80vh"},bsStyle:"info"},a.a.createElement(f.a,{id:"uncontrolled-tab",defaultActiveKey:1},a.a.createElement(w.a,{eventKey:1,title:"My kitties"},a.a.createElement(M,{sellKittie:this.props.sellKittie,kittieCancelSale:this.props.kittieCancelSale,kitties:this.props.kitties})),a.a.createElement(w.a,{eventKey:2,title:"Kitties Shop"},a.a.createElement(W,{buyKittie:this.props.buyKittie,kittiesForSale:this.props.kittiesForSale})))):a.a.createElement("div",null)}}]),t}(n.Component),T=function(e){function t(e){var i;return Object(l.a)(this,t),(i=Object(c.a)(this,Object(u.a)(t).call(this,e))).enableEthereum=function(){window.ethereum?(window.web3=new h.a(window.ethereum),window.ethereum.enable().then(function(){i.startApp()}).catch(function(e){return console.log(e)})):(alert("'Non-Ethereum browser detected. You need install MetaMask!'"),window.open("https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn","_self"))},i.removeCharacter=function(e){i.setState({characters:i.state.characters.filter(function(t,i){return i!==e})})},i.subscribeOnEvents=function(){var e=i.state.contract;e&&(i.setState({updateKittiesEvent:e.events.UpdateOwnerKitties({filter:{owner:i.state.userAccount}})}),i.state.updateKittiesEvent.on("data",function(){console.log("UpdateOwnerKitties"),i.getKittiesByOwner(),i.getKittiesForSale()}))},i.unSubscribeOnEvents=function(){var e=i.state.updateKittiesEvent;e&&e.unsubscribe()},i.getKittiesByOwner=function(){var e=i.state.contract;e&&e.methods.getKittiesByOwner(i.state.userAccount).call().then(function(e){return i.getKitties(e,"kitties")})},i.getKittiesForSale=function(){var e=i.state.contract;e&&e.methods.getKittiesForSale(i.state.userAccount).call().then(function(e){return i.getKitties(e,"kittiesForSale")})},i.getKitties=function(e,t){var n=[],a=e.map(function(e){return i.state.contract.methods.kitties(e).call()});Promise.all(a).then(function(e){var a=e.map(function(e){return fetch("https://api.cryptokitties.co/kitties/"+(parseInt(e.id)+1)).then(function(e){return e.json()}).then(function(t){n=Object(r.a)(n).concat([{id:e.id,price:e.price,forSale:e.forSale,url:t.image_url}])})});Promise.all(a).then(function(){n.sort(function(e,t){return t.id-e.id}),i.setState(Object(s.a)({},t,n))})})},i.createFirstKittie=function(e){var t=i.state.contract;t&&(t.methods.createFirstKittie().send({from:i.state.userAccount,gasPrice:window.web3.utils.toWei("1","gwei")}).on("error",function(){e(!1)}),e(!0))},i.sellKittie=function(e,t,n,a){var s=i.state.contract;if(s){var r=window.web3.utils.toWei(t,"ether");console.log(r),s.methods.kittieForSale(e,r).send({from:i.state.userAccount,gasPrice:window.web3.utils.toWei("1","gwei")}).on("receipt",function(){n(!1),a()}).on("error",function(){n(!1)}),n(!0)}},i.buyKittie=function(e,t,n,a){var s=i.state.contract;s&&(s.methods.buyKittie(e).send({from:i.state.userAccount,value:t,gasPrice:window.web3.utils.toWei("1","gwei")}).on("receipt",function(){n(!1),a()}).on("error",function(){n(!1)}),n(!0))},i.kittieCancelSale=function(e,t){var n=i.state.contract;n&&(n.methods.kittieCancelSale(e).send({from:i.state.userAccount,gasPrice:window.web3.utils.toWei("1","gwei")}).on("error",function(){t(!1)}),t(!0))},i.handleSubmit=function(e){i.setState({characters:Object(r.a)(i.state.characters).concat([e])})},i.initialState={characters:[],kitties:void 0,kittiesForSale:void 0,userAccount:void 0,contract:void 0,updateKittiesEvent:void 0},i.state=i.initialState,i}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.enableEthereum()}},{key:"startApp",value:function(){var e=this;window.web3.currentProvider.publicConfigStore.on("update",function(){window.web3.eth.getAccounts().then(function(t){t[0]?t[0]!==e.state.userAccount&&(e.unSubscribeOnEvents(),e.setState({kitties:void 0,kittiesForSale:void 0,contract:new window.web3.eth.Contract(m,"0x6b64bed4936bccd10256dc062b992b999d43eeed"),userAccount:t[0]}),e.subscribeOnEvents(),e.getKittiesByOwner(),e.getKittiesForSale()):e.setState(e.initialState)})})}},{key:"render",value:function(){this.state.characters;return a.a.createElement("div",{className:"container"},a.a.createElement(b.a,{className:"center-block text-center title"},"PseudoKitties"),a.a.createElement(H,{kitties:this.state.kitties,kittiesForSale:this.state.kittiesForSale,createFirstKittie:this.createFirstKittie,sellKittie:this.sellKittie,buyKittie:this.buyKittie,kittieCancelSale:this.kittieCancelSale}))}}]),t}(n.Component),_=i(27);i.n(_).a.render(a.a.createElement(T,null),document.getElementById("root"))}},[[188,2,1]]]);
//# sourceMappingURL=main.0b3a1296.chunk.js.map